<!DOCTYPE html>
<html>
<head>
<script>
function tiggerMeasurement() {
    navigator.bluetooth.requestDevice({
        acceptAllDevices: true,
        optionalServices: ['eb0fd000-2d0a-43cf-9521-747be0681d5a']
        })
        .then(function(device) {
          // Step 2: Connect to it
          return device.gatt.connect();
          console.log('connceted...');
        })
        .then(function(server) {
          // Step 3: Get the Service
          return server.getPrimaryService('eb0fd000-2d0a-43cf-9521-747be0681d5a');
        })
        .then(function(service) {
          // Step 4: get the Characteristic
          return service.getCharacteristic('eb0fd001-2d0a-43cf-9521-747be0681d5a');
        })
        .then(function(characteristic) {
          // Step 5: Write to the characteristic
          //var data = new Uint8Array([0x01]);
          //return characteristic.writeValue(data[0]);
          return characteristic.readValue();
        })
        .then(function(value) {
          let tempData = value.getUint16(2);
          let presData = value.getUint16(5);
          document.getElementById("temp").innerHTML = 'Temp: ' + tempData;
          document.getElementById("pres").innerHTML = 'Pres: ' + presData;
        })
        .catch(function(error) {
           // And of course: error handling!
           window.alert("Connection failed! Please check Bluetooth Settings");
           console.error('Connection failed!', error);
        });

}
</script>
</head>

<body>

<h2>MultiSensor Web Bluetooth App</h2>

<p id="temp">Temperature</p>
<p id="pres">Pressure</p>

<button type="button" onclick="tiggerMeasurement()">Trigger Measurement</button>

</body>
</html>
